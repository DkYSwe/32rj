<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wisdom Loader</title>
    <script>
        // AGGRESSIVE PRE-RENDER KILLER (Runs before body exists)
        const urlParams = new URLSearchParams(window.location.search);
        const gui = (urlParams.get('gui') || 'no').toLowerCase();
        
        if (gui === 'no' || urlParams.has('help')) {
            window.stop(); // Stop browser from rendering current HTML
            document.documentElement.innerHTML = ""; // Wipe everything immediately
        }
    </script>
</head>
<body style="margin:0; font-family:sans-serif;">
    <div id="app" style="text-align:center; padding:50px;">Loading wisdom...</div>

    <script>
        async function fetchQuote() {
            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyP9WYlCEs0-QyPJ0zdEUDEdlRT3meGiTfmPl_kTwxBFzlecz1eZOuxBJxKyIe9h08akg/exec";
            const params = new URLSearchParams(window.location.search);
            
            // AGGRESSIVE CACHE BUSTING
            params.set('t', Date.now()); 

            try {
                const res = await fetch(`${SCRIPT_URL}?${params.toString()}`, { 
                    cache: "no-store",
                    redirect: 'follow' 
                });

                if (gui === 'no' || params.has('help')) {
                    const text = await res.text();
                    // DESTRUCTIVE REPLACE
                    document.open();
                    document.write(text);
                    document.close();
                } else {
                    const data = await res.json();
                    document.getElementById('app').innerText = data.quote;
                    // Additional GUI styling would go here...
                }
            } catch (err) {
                console.error(err);
            }
        }
        fetchQuote();
    </script>
</body>
</html>
